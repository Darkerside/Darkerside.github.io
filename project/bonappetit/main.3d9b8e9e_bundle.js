(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],[function(e,t,n){"use strict";var r={KEY:"12345",BASE_URL:"https://dicoding-restaurant-api.el.r.appspot.com/",BASE_IMAGE_URL_SM:"https://dicoding-restaurant-api.el.r.appspot.com/images/small/",BASE_IMAGE_URL_MD:"https://dicoding-restaurant-api.el.r.appspot.com/images/medium/",BASE_IMAGE_URL_LG:"https://dicoding-restaurant-api.el.r.appspot.com/images/large/",POST_REVIEW:"https://dicoding-restaurant-api.el.r.appspot.com/review",CACHE_NAME:{prefix:"BonAppetit",suffix:"v0.3",precache:"app-shell"},DATABASE_NAME:"BonAppetit-database",DATABASE_VERSION:1,OBJECT_STORE_NAME:"restaurant"};t["a"]=r},,function(e,t,n){"use strict";function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function a(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var r={init:function e(t){this._id=t.id;this._content=t.content;this.createToast()},createToast:function e(){var r=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=document.querySelector("snack-bar");n.innerHTML='\n      <div class="snackbar show" id="toast-'.concat(r._id,'">').concat(r._content,'\n        <button class="material-button btn-toast" aria-label="Button close Toast"><span class="material-icons">close</span></button>\n      </div>\n    ');r.close();case 3:case"end":return t.stop()}}},e)}))()},close:function e(){var n=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:document.getElementById("toast-"+n._id).addEventListener("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:document.querySelector(".snackbar").classList.remove("show");case 1:case"end":return t.stop()}}},e)})));case 1:case"end":return t.stop()}}},e)}))()}};t["a"]=r},function(e,t,n){"use strict";var r=n(2);function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function a(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var i={isOnline:function e(){var n=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(navigator.onLine===false)){t.next=4;break}r["a"].init({id:"offline",content:"No Internet Connection"});t.next=11;break;case 4:if(!(navigator.onLine===true)){t.next=8;break}r["a"].init({id:"online",content:"Something Wrong"});t.next=11;break;case 8:r["a"].init({id:"404",content:"Data Not Found"});t.next=11;return n.render404();case 11:case"end":return t.stop()}}},e)}))()},pageError:function e(){var n=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return n.render404();case 2:r["a"].init({id:"page-404",content:"Page Not Found"});case 3:case"end":return t.stop()}}},e)}))()},render404:function e(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:document.querySelector("#maincontent").innerHTML='\n      <section class="content">\n        <div class="list">\n          <h2 class="errno404"><span>404</span> NOT FOUND!</h2>\n        </div>\n      </section>\n    ';case 1:case"end":return t.stop()}}},e)}))()}};t["a"]=i},function(e,t,n){"use strict";var r=n(0);var a={RESTAURANT_LITS:"".concat(r["a"].BASE_URL,"list"),DETAIL:function e(t){return"".concat(r["a"].BASE_URL,"detail/").concat(t)}};var i=a;function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function o(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function v(e,t,n){if(t)s(e.prototype,t);if(n)s(e,n);return e}var l=function(){function e(){u(this,e)}v(e,null,[{key:"getListRestaurants",value:function(){var e=o(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return fetch(i.RESTAURANT_LITS);case 2:n=t.sent;t.next=5;return n.json();case 5:r=t.sent;return t.abrupt("return",r.restaurants);case 7:case"end":return t.stop()}}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"detailRestaurant",value:function(){var t=o(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return fetch(i.DETAIL(n));case 2:r=t.sent;t.next=5;return r.json();case 5:a=t.sent;return t.abrupt("return",a.restaurant);case 7:case"end":return t.stop()}}},e)}));function e(e){return t.apply(this,arguments)}return e}()}]);return e}();var f=t["a"]=l},function(e,t,n){"use strict";var r=n(19);var a=n(0);function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function i(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var o=a["a"].DATABASE_NAME,u=a["a"].DATABASE_VERSION,s=a["a"].OBJECT_STORE_NAME;var v=Object(r["a"])(o,u,{upgrade:function e(t){t.createObjectStore(s,{keyPath:"id"})}});var l={getRestaurant:function e(n){return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:t.next=4;return v;case 4:return t.abrupt("return",t.sent.get(s,n));case 5:case"end":return t.stop()}}},e)}))()},getAllRestaurant:function e(){return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return v;case 2:return t.abrupt("return",t.sent.getAll(s));case 3:case"end":return t.stop()}}},e)}))()},putRestaurant:function e(n){return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(n.hasOwnProperty("id")){t.next=2;break}return t.abrupt("return");case 2:t.next=4;return v;case 4:return t.abrupt("return",t.sent.put(s,n));case 5:case"end":return t.stop()}}},e)}))()},deleteRestaurant:function e(n){return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return v;case 2:return t.abrupt("return",t.sent["delete"](s,n));case 3:case"end":return t.stop()}}},e)}))()}};t["a"]=l},function(e,t,n){"use strict";var r={parseActiveUrlWithCombiner:function e(){var t=window.location.hash.slice(1).toLowerCase();var n=this._urlSplitter(t);return this._urlCombiner(n)},parseActiveUrlWithoutCombiner:function e(){var t=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(t)},_urlSplitter:function e(t){var n=t.split("/");return{resource:n[1]||null,id:n[2]||null,verb:n[3]||null}},_urlCombiner:function e(t){return(t.resource?"/".concat(t.resource):"/")+(t.id?"/:id":"")+(t.verb?"/".concat(t.verb):"")}};t["a"]=r},function(e,t,n){"use strict";var s=n(4);var v=n(8);var l=n(3);var f=n(2);function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function d(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var r={_isRestaurantExist:function e(r){var a=this;return d(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return a._favoriteRestaurant.getRestaurant(r);case 2:n=t.sent;return t.abrupt("return",!!n);case 4:case"end":return t.stop()}}},e)}))()},addEventClickedButton:function e(n,r,a,i){var o=this;return d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:o._button=n;o._classlist=r["class"].value;o._id=r.target.value;o._nama=r.nama.value;o._favoriteRestaurant=a;o._isfromfavorited=i||false;t.next=8;return o._favChange(o._button,o._id,o._nama,o._classlist);case 8:case"end":return t.stop()}}},e)}))()},_favChange:function e(n,r,a,i){var o=this;return d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return o._isRestaurantExist(r);case 2:if(!t.sent){t.next=7;break}t.next=5;return o._createRemoveEventButton(n,r,a,i);case 5:t.next=9;break;case 7:t.next=9;return o._createAddEventButton(n,r,a,i);case 9:case"end":return t.stop()}}},e)}))()},_createAddEventButton:function e(a,i,o,u){var c=this;return d(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=document.querySelector(".fav-"+i);n.classList.remove("active");n.setAttribute("aria-label","Add to Favorites");r=function(){var n=d(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n.stopPropagation();t.prev=1;t.next=4;return s["a"].detailRestaurant(i);case 4:r=t.sent;if(r===null){r={id:i}}c.restaurant=r;t.next=13;break;case 9:t.prev=9;t.t0=t["catch"](1);l["a"].isOnline();c.restaurant="";case 13:t.prev=13;if(!(c.restaurant.id!==undefined)){t.next=22;break}t.next=17;return c._favoriteRestaurant.putRestaurant(c.restaurant);case 17:t.next=19;return f["a"].init({id:i,content:o+" ditambahkan ke favorites"});case 19:c._createRemoveEventButton(a,i,o,u);t.next=24;break;case 22:t.next=24;return c._createAddEventButton(a,i,o,u);case 24:return t.finish(13);case 25:case"end":return t.stop()}}},e,null,[[1,9,13,25]])}));return function e(t){return n.apply(this,arguments)}}();a.addEventListener("click",r.bind(c),{once:true});case 5:case"end":return t.stop()}}},e)}))()},_createRemoveEventButton:function e(a,i,o,u){var c=this;return d(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=document.querySelector(".fav-"+i);n.classList.add("active");n.setAttribute("aria-label","Removes from Favorites");r=function(){var n=d(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n.stopPropagation();t.next=3;return c._favoriteRestaurant.deleteRestaurant(i);case 3:t.next=5;return f["a"].init({id:i,content:o+" dihapus dari favorites"});case 5:t.next=7;return c._createAddEventButton(a,i,o,u);case 7:if(!(c._isfromfavorited===true)){t.next=10;break}t.next=10;return v["a"].afterRender();case 10:case"end":return t.stop()}}},e)}));return function e(t){return n.apply(this,arguments)}}();a.addEventListener("click",r.bind(c),{once:true});case 5:case"end":return t.stop()}}},e)}))()}};t["a"]=r},,,function(e,t,n){"use strict";var r=n.p+"assets/images/utils/stars.png";var a={setStarsBackground:function e(){var t=document.getElementsByClassName("post-item-stars");for(var n=0;n<t.length;n++){t[n].style.backgroundImage="url('".concat(r,"')")}}};var i=t["a"]=a},,,function(e,t,n){"use strict";t["a"]=n.p+"assets/images/utils/placeholder.jpg"},function(e,t,n){"use strict";var r={init:function e(t){var n=this;var r=t.button,a=t.drawer,i=t.content;r.addEventListener("click",function(e){n._toggleDrawer(e,a)});i.addEventListener("click",function(e){n._closeDrawer(e,a)})},_toggleDrawer:function e(t,n){t.stopPropagation();n.classList.toggle("open")},_closeDrawer:function e(t,n){t.stopPropagation();n.classList.remove("open")}};t["a"]=r},function(e,t,n){"use strict";var r=n(16);var a=n(9);var i=n(8);var o={"/":r["a"],"/detail/:id":a["a"],"/favorites":i["a"]};t["a"]=o},,function(e,t,n){"use strict";var c=n(6);var s=n(0);var v=n(4);var l=n(9);var f=n(3);function d(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function r(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){d(r,t,n,a,i,"next",e)}function i(e){d(r,t,n,a,i,"throw",e)}a(undefined)})}}var a={sendNotification:function e(t){var n=t.title,r=t.options;if(!this._checkAvailability()){console.log("Notification not supported in this browser");return}if(!this._checkPermission()){console.log("User did not yet granted permission");this._requestPermission();return}this._showNotification({title:n,options:r})},_checkAvailability:function e(){return!!("Notification"in window)},_checkPermission:function e(){return Notification.permission==="granted"},_requestPermission:function e(){return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return Notification.requestPermission();case 2:n=t.sent;if(n==="denied"){console.log("Notification Denied")}if(n==="default"){console.log("Permission closed")}case 5:case"end":return t.stop()}}},e)}))()},_showNotification:function e(i){return r(regeneratorRuntime.mark(function e(){var n,r,a;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=i.title,r=i.options;t.next=3;return navigator.serviceWorker.ready;case 3:a=t.sent;a.showNotification(n,r);case 5:case"end":return t.stop()}}},e)}))()}};var p=a;var m=n(2);function w(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function h(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){w(r,t,n,a,i,"next",e)}function i(e){w(r,t,n,a,i,"throw",e)}a(undefined)})}}var i={_getUserReview:function e(){var u=this;return h(regeneratorRuntime.mark(function e(){var n,r,a,i,o;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=c["a"].parseActiveUrlWithoutCombiner();r=document.getElementById("name").value;a=document.getElementById("review-text").value;i=function e(t){t.preventDefault();if(r!==""&&a!==""){u._submitUserReview({id:n.id,name:r,review:a});document.getElementById("name").value="";document.getElementById("review-text").value="";document.querySelector("#review").classList.remove("active")}else{m["a"].init({id:"error-review",content:"Name or Review cannot be empty"})}};o=document.getElementsByClassName("write-your-review")[0];o.addEventListener("submit",i,{once:true});case 6:case"end":return t.stop()}}},e)}))()},_submitUserReview:function e(u){return h(regeneratorRuntime.mark(function e(){var r,n,a,i,o;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:r=u.id,n=u.name,a=u.review;i=JSON.stringify({id:"".concat(r),name:"".concat(n),review:"".concat(a)});o={method:"POST",headers:{"X-Auth-Token":s["a"].KEY,"Content-Type":"application/json"},body:i,redirect:"follow"};t.next=5;return fetch(s["a"].POST_REVIEW,o).then(function(e){return e.json()}).then(function(e){var t=e.customerReviews.length-1;var n=e.customerReviews[t];p.sendNotification({title:"BonAppétit - Review Published",options:{body:"Name: ".concat(n.name,"\nReview: ").concat(n.review,"\n\nThanks for your feedback!")}});m["a"].init({id:"review-success",content:"Review Published"})}).then(h(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return v["a"].detailRestaurant(r);case 2:n=t.sent;l["a"]._extraRender(n);case 4:case"end":return t.stop()}}},e)})))["catch"](function(e){f["a"].isOnline()});case 5:case"end":return t.stop()}}},e)}))()}};var u=i;function g(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function R(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){g(r,t,n,a,i,"next",e)}function i(e){g(r,t,n,a,i,"throw",e)}a(undefined)})}}var _=1;var o={init:function e(){var t=this;var n="read";var r=document.querySelector("#prev");var a=document.querySelector("#next");var i=document.querySelector("#review");var o=document.querySelector("#btn-send-review");this._writeReview(n);this._showReview(1);r.addEventListener("click",function(){t._showReview(_+=-1);console.log("review number "+_+" loaded")});a.addEventListener("click",function(){t._showReview(_+=1);console.log("review number "+_+" loaded")});i.addEventListener("click",function(){if(n==="read"){n="write";t._writeReview(n);document.querySelector("#review").classList.add("active")}else if(n==="write"){n="read";t._writeReview(n);document.querySelector("#review").classList.remove("active")}console.log(n)});o.addEventListener("click",R(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return u._getUserReview();case 3:t.prev=3;if(document.querySelector("#review").classList.contains("active")===false){n="read"}return t.finish(3);case 6:case"end":return t.stop()}}},e,null,[[0,,3,6]])})))},_showReview:function e(t){var n;var r=document.getElementsByClassName("review-container");if(t>r.length){_=1}if(t<1){_=r.length}for(n=0;n<r.length;n++){r[n].style.display="none"}r[_-1].style.display="flex"},_writeReview:function e(t){var n=document.querySelector("#review-list");var r=document.querySelector("#review-form");if(t==="read"){n.style.display="";r.style.display="none"}else if(t==="write"){n.style.display="none";r.style.display="";document.querySelector("#name").focus({preventScroll:false})}}};var x=t["a"]=o},,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(20);var a=n(21);var i=n(12);var o=n(22);var u=n(18);function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function s(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var v=function(){var t=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!("serviceWorker"in navigator)){console.error("ServiceWorker: Browser is not Supported.")}else{navigator.serviceWorker.register("/sw.js").then(function(e){console.log("ServiceWorker: Install Success. Scope:",e.scope)})["catch"](function(e){console.error("ServiceWorker: Install Failed. Error:",e)})}case 1:case"end":return t.stop()}}},e)}));return function e(){return t.apply(this,arguments)}}();var l=v;var f=new u["a"]({button:document.querySelector("#menu"),drawer:document.querySelector("#drawer"),content:document.querySelector("#maincontent")});window.addEventListener("hashchange",function(){f.renderPage()});window.addEventListener("load",function(){f.renderPage();l()})}]]);