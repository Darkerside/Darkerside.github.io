(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],[function(e,t,n){"use strict";var r={KEY:"12345",BASE_URL:"https://dicoding-restaurant-api.el.r.appspot.com/",BASE_IMAGE_URL_SM:"https://dicoding-restaurant-api.el.r.appspot.com/images/small/",BASE_IMAGE_URL_MD:"https://dicoding-restaurant-api.el.r.appspot.com/images/medium/",BASE_IMAGE_URL_LG:"https://dicoding-restaurant-api.el.r.appspot.com/images/large/",POST_REVIEW:"https://dicoding-restaurant-api.el.r.appspot.com/review",CACHE_NAME:{prefix:"BonAppetit",suffix:"v0.3",precache:"app-shell"},DATABASE_NAME:"BonAppetit-database",DATABASE_VERSION:1,OBJECT_STORE_NAME:"restaurant"};t["a"]=r},,function(e,t,n){"use strict";function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function a(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var r={init:function e(t){this._id=t.id;this._content=t.content;this.createToast()},createToast:function e(){var r=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=document.querySelector("snack-bar");n.innerHTML='\n      <div class="snackbar show" id="toast-'.concat(r._id,'">').concat(r._content,'\n        <button class="material-button btn-toast" aria-label="Button close Toast"><span class="material-icons">close</span></button>\n      </div>\n    ');r.close();case 3:case"end":return t.stop()}}},e)}))()},close:function e(){var n=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:document.getElementById("toast-"+n._id).addEventListener("click",a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:document.querySelector(".snackbar").classList.remove("show");case 1:case"end":return t.stop()}}},e)})));case 1:case"end":return t.stop()}}},e)}))()}};t["a"]=r},function(e,t,n){"use strict";var r=n(2);function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function a(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var i={isOnline:function e(){var n=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!(navigator.onLine===false)){t.next=4;break}r["a"].init({id:"offline",content:"No Internet Connection"});t.next=11;break;case 4:if(!(navigator.onLine===true)){t.next=8;break}r["a"].init({id:"Post-Error",content:"Something wrong!"});t.next=11;break;case 8:r["a"].init({id:"404",content:"Data Not Found"});t.next=11;return n.render404();case 11:case"end":return t.stop()}}},e)}))()},pageError:function e(){var n=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return n.render404();case 2:r["a"].init({id:"page-404",content:"Page Not Found"});case 3:case"end":return t.stop()}}},e)}))()},render404:function e(){return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:document.querySelector("#maincontent").innerHTML='\n      <section class="content">\n        <div class="list">\n          <h2 class="errno404"><span>404</span> NOT FOUND!</h2>\n        </div>\n      </section>\n    ';case 1:case"end":return t.stop()}}},e)}))()}};t["a"]=i},function(e,t,n){"use strict";var r=n(21);var a=n(0);function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function i(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var o=a["a"].DATABASE_NAME,u=a["a"].DATABASE_VERSION,s=a["a"].OBJECT_STORE_NAME;var v=Object(r["a"])(o,u,{upgrade:function e(t){t.createObjectStore(s,{keyPath:"id"})}});var l={getRestaurant:function e(n){return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return v;case 2:return t.abrupt("return",t.sent.get(s,n));case 3:case"end":return t.stop()}}},e)}))()},getAllRestaurant:function e(){return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return v;case 2:return t.abrupt("return",t.sent.getAll(s));case 3:case"end":return t.stop()}}},e)}))()},putRestaurant:function e(n){return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return v;case 2:return t.abrupt("return",t.sent.put(s,n));case 3:case"end":return t.stop()}}},e)}))()},deleteRestaurant:function e(n){return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return v;case 2:return t.abrupt("return",t.sent["delete"](s,n));case 3:case"end":return t.stop()}}},e)}))()}};t["a"]=l},function(e,t,n){"use strict";var r={parseActiveUrlWithCombiner:function e(){var t=window.location.hash.slice(1).toLowerCase();var n=this._urlSplitter(t);return this._urlCombiner(n)},parseActiveUrlWithoutCombiner:function e(){var t=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(t)},_urlSplitter:function e(t){var n=t.split("/");return{resource:n[1]||null,id:n[2]||null,verb:n[3]||null}},_urlCombiner:function e(t){return(t.resource?"/".concat(t.resource):"/")+(t.id?"/:id":"")+(t.verb?"/".concat(t.verb):"")}};t["a"]=r},function(e,t,n){"use strict";var r=n(0);var a={RESTAURANT_LITS:"".concat(r["a"].BASE_URL,"list"),DETAIL:function e(t){return"".concat(r["a"].BASE_URL,"detail/").concat(t)}};var i=a;function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function o(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function v(e,t,n){if(t)s(e.prototype,t);if(n)s(e,n);return e}var l=function(){function e(){u(this,e)}v(e,null,[{key:"getListRestaurants",value:function(){var e=o(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return fetch(i.RESTAURANT_LITS);case 2:n=t.sent;t.next=5;return n.json();case 5:r=t.sent;return t.abrupt("return",r.restaurants);case 7:case"end":return t.stop()}}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"detailRestaurant",value:function(){var t=o(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return fetch(i.DETAIL(n));case 2:r=t.sent;t.next=5;return r.json();case 5:a=t.sent;return t.abrupt("return",a.restaurant);case 7:case"end":return t.stop()}}},e)}));function e(e){return t.apply(this,arguments)}return e}()}]);return e}();var f=t["a"]=l},function(e,t,n){"use strict";var v=n(6);var l=n(4);var s=n(8);var f=n(2);function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function d(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var r={init:function e(a){var i=this;return d(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=a.AddToFavButton,r=a.restaurant;i._AddToFavButton=n;i._restaurant=r;t.next=5;return i._changeButtonStatus();case 5:case"end":return t.stop()}}},e)}))()},_changeButtonStatus:function e(){var r=this;return d(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=r._restaurant.id;t.next=3;return r._isRestaurantExist(n);case 3:if(!t.sent){t.next=7;break}r._renderLiked();t.next=8;break;case 7:r._renderLike();case 8:case"end":return t.stop()}}},e)}))()},_isRestaurantExist:function e(r){return d(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return l["a"].getRestaurant(r);case 2:n=t.sent;return t.abrupt("return",!!n);case 4:case"end":return t.stop()}}},e)}))()},_renderLike:function e(){var n=this;var t=document.querySelector("#save-button");t.classList.remove("active");t.addEventListener("click",d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return l["a"].putRestaurant(n._restaurant);case 2:t.next=4;return f["a"].init({id:"add",content:"Added to Favorites"});case 4:n._renderLiked();case 5:case"end":return t.stop()}}},e)})))},_renderLiked:function e(){var n=this;var t=document.querySelector("#save-button");t.classList.add("active");t.addEventListener("click",d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return l["a"].deleteRestaurant(n._restaurant.id);case 2:t.next=4;return f["a"].init({id:"delete",content:"Removed from Favorites"});case 4:n._renderLike();case 5:case"end":return t.stop()}}},e)})))},addEventClickedButton:function e(n,r,a){var i=this;return d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:i._button=n;i._classlist=r["class"].value;i._id=r.target.value;i._nama=r.nama.value;i._isfromfavorited=a||false;t.next=7;return i._favedChange(i._button,i._id,i._nama,i._classlist);case 7:case"end":return t.stop()}}},e)}))()},_favedChange:function e(n,r,a,i){var o=this;return d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return o._isRestaurantExist(r);case 2:if(!t.sent){t.next=7;break}t.next=5;return o._createRemoveEventButton(n,r,a,i);case 5:t.next=9;break;case 7:t.next=9;return o._createAddEventButton(n,r,a,i);case 9:case"end":return t.stop()}}},e)}))()},_createAddEventButton:function e(i,o,u,c){var s=this;return d(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=document.getElementById("fav-"+o);n.classList.remove("faved");r=function(){var n=d(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n.stopPropagation();r=document.getElementById("fav-"+o);r.classList.add("faved");t.next=5;return v["a"].detailRestaurant(o);case 5:a=t.sent;t.next=8;return l["a"].putRestaurant(a);case 8:t.next=10;return f["a"].init({id:o,content:u+" ditambahkan ke favorites"});case 10:s._createRemoveEventButton(i,o,u,c);case 11:case"end":return t.stop()}}},e)}));return function e(t){return n.apply(this,arguments)}}();i.addEventListener("click",r.bind(s),{once:true});case 4:case"end":return t.stop()}}},e)}))()},_createRemoveEventButton:function e(a,i,o,u){var c=this;return d(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=document.getElementById("fav-"+i);n.classList.add("faved");r=function(){var n=d(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n.stopPropagation();r=document.getElementById("fav-"+i);r.classList.remove("faved");t.next=5;return l["a"].deleteRestaurant(i);case 5:t.next=7;return f["a"].init({id:i,content:o+" dihapus dari favorites"});case 7:t.next=9;return c._createAddEventButton(a,i,o,u);case 9:if(!(c._isfromfavorited===true)){t.next=14;break}t.next=12;return s["a"].afterRender();case 12:t.next=14;return s["a"].extraRender();case 14:case"end":return t.stop()}}},e)}));return function e(t){return n.apply(this,arguments)}}();a.addEventListener("click",r.bind(c),{once:true});case 4:case"end":return t.stop()}}},e)}))()}};t["a"]=r},,,function(e,t,n){"use strict";var r=n.p+"assets/images/utils/stars.png";var a={setStarsBackground:function e(){var t=document.getElementsByClassName("post-item-stars");for(var n=0;n<t.length;n++){t[n].style.backgroundImage="url('".concat(r,"')")}}};var i=t["a"]=a},,,function(e,t,n){"use strict";t["a"]=n.p+"assets/images/utils/placeholder.jpg"},,,function(e,t,n){"use strict";var r={init:function e(t){var n=this;var r=t.button,a=t.drawer,i=t.content;r.addEventListener("click",function(e){n._toggleDrawer(e,a)});i.addEventListener("click",function(e){n._closeDrawer(e,a)})},_toggleDrawer:function e(t,n){t.stopPropagation();n.classList.toggle("open")},_closeDrawer:function e(t,n){t.stopPropagation();n.classList.remove("open")}};t["a"]=r},function(e,t,n){"use strict";var r=n(18);var a=n(9);var i=n(8);var o={"/":r["a"],"/detail/:id":a["a"],"/favorites":i["a"]};t["a"]=o},,function(e,t,n){"use strict";var c=n(5);var s=n(0);var v=n(9);var l=n(3);function f(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function r(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){f(r,t,n,a,i,"next",e)}function i(e){f(r,t,n,a,i,"throw",e)}a(undefined)})}}var a={sendNotification:function e(t){var n=t.title,r=t.options;if(!this._checkAvailability()){console.log("Notification not supported in this browser");return}if(!this._checkPermission()){console.log("User did not yet granted permission");this._requestPermission();return}this._showNotification({title:n,options:r})},_checkAvailability:function e(){return!!("Notification"in window)},_checkPermission:function e(){return Notification.permission==="granted"},_requestPermission:function e(){return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.next=2;return Notification.requestPermission();case 2:n=t.sent;if(n==="denied"){console.log("Notification Denied")}if(n==="default"){console.log("Permission closed")}case 5:case"end":return t.stop()}}},e)}))()},_showNotification:function e(i){return r(regeneratorRuntime.mark(function e(){var n,r,a;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=i.title,r=i.options;t.next=3;return navigator.serviceWorker.ready;case 3:a=t.sent;a.showNotification(n,r);case 5:case"end":return t.stop()}}},e)}))()}};var d=a;var p=n(2);function m(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function i(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){m(r,t,n,a,i,"next",e)}function i(e){m(r,t,n,a,i,"throw",e)}a(undefined)})}}var o={_getUserReview:function e(){var u=this;return i(regeneratorRuntime.mark(function e(){var n,r,a,i,o;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=c["a"].parseActiveUrlWithoutCombiner();r=document.getElementById("name").value;a=document.getElementById("review-text").value;i=function e(t){t.preventDefault();if(r!==""&&a!==""){u._submitUserReview({id:n.id,name:r,review:a});document.getElementById("name").value="";document.getElementById("review-text").value="";document.querySelector("#review").classList.remove("active")}else{p["a"].init({id:"error-review",content:"Name or Review cannot be empty"});console.log("called")}};o=document.getElementsByClassName("write-your-review")[0];o.addEventListener("submit",i,{once:true});case 6:case"end":return t.stop()}}},e)}))()},_submitUserReview:function e(u){return i(regeneratorRuntime.mark(function e(){var n,r,a,i,o;return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:n=u.id,r=u.name,a=u.review;i=JSON.stringify({id:"".concat(n),name:"".concat(r),review:"".concat(a)});o={method:"POST",headers:{"X-Auth-Token":s["a"].KEY,"Content-Type":"application/json"},body:i,redirect:"follow"};t.next=5;return fetch(s["a"].POST_REVIEW,o).then(function(e){return e.json()}).then(function(e){var t=e.customerReviews.length-1;var n=e.customerReviews[t];d.sendNotification({title:"BonAppétit - Review Published",options:{body:"Name: ".concat(n.name,"\nReview: ").concat(n.review,"\n\nThanks for your feedback!")}})})["catch"](function(e){l["a"].isOnline()});case 5:v["a"].extraRender();case 6:case"end":return t.stop()}}},e)}))()}};var u=o;function w(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function h(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){w(r,t,n,a,i,"next",e)}function i(e){w(r,t,n,a,i,"throw",e)}a(undefined)})}}var g=1;var R={init:function e(){var t=this;var n="read";var r=document.querySelector("#prev");var a=document.querySelector("#next");var i=document.querySelector("#review");var o=document.querySelector("#btn-send-review");this._writeReview(n);this._showReview(1);r.addEventListener("click",function(){t._showReview(g+=-1);console.log("review number "+g+" loaded")});a.addEventListener("click",function(){t._showReview(g+=1);console.log("review number "+g+" loaded")});i.addEventListener("click",function(){if(n==="read"){n="write";t._writeReview(n);document.querySelector("#review").classList.add("active")}else if(n==="write"){n="read";t._writeReview(n);document.querySelector("#review").classList.remove("active")}console.log(n)});o.addEventListener("click",h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return u._getUserReview();case 3:t.prev=3;if(document.querySelector("#review").classList.contains("active")===false){n="read"}return t.finish(3);case 6:case"end":return t.stop()}}},e,null,[[0,,3,6]])})))},_showReview:function e(t){var n;var r=document.getElementsByClassName("review-container");if(t>r.length){g=1}if(t<1){g=r.length}for(n=0;n<r.length;n++){r[n].style.display="none"}r[g-1].style.display="flex"},_writeReview:function e(t){var n=document.querySelector("#review-list");var r=document.querySelector("#review-form");if(t==="read"){n.style.display="";r.style.display="none"}else if(t==="write"){n.style.display="none";r.style.display="";document.querySelector("#name").focus({preventScroll:false})}}};var _=t["a"]=R},,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(22);var a=n(23);var i=n(12);var o=n(25);var u=n(20);function c(e,t,n,r,a,i,o){try{var u=e[i](o);var c=u.value}catch(e){n(e);return}if(u.done){t(c)}else{Promise.resolve(c).then(r,a)}}function s(u){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=u.apply(e,o);function a(e){c(r,t,n,a,i,"next",e)}function i(e){c(r,t,n,a,i,"throw",e)}a(undefined)})}}var v=function(){var t=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){while(1){switch(t.prev=t.next){case 0:if(!("serviceWorker"in navigator)){console.error("ServiceWorker: Browser is not Supported.")}else{navigator.serviceWorker.register("/sw.js").then(function(e){console.log("ServiceWorker: Install Success. Scope:",e.scope)})["catch"](function(e){console.error("ServiceWorker: Install Failed. Error:",e)})}case 1:case"end":return t.stop()}}},e)}));return function e(){return t.apply(this,arguments)}}();var l=v;var f=new u["a"]({button:document.querySelector("#menu"),drawer:document.querySelector("#drawer"),content:document.querySelector("#maincontent")});window.addEventListener("hashchange",function(){f.renderPage()});window.addEventListener("load",function(){f.renderPage();l()})}]]);