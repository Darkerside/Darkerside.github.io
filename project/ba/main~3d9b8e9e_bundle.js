(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";t.a={KEY:"12345",BASE_URL:"https://dicoding-restaurant-api.el.r.appspot.com/",BASE_IMAGE_URL_SM:"https://dicoding-restaurant-api.el.r.appspot.com/images/small/",BASE_IMAGE_URL_MD:"https://dicoding-restaurant-api.el.r.appspot.com/images/medium/",BASE_IMAGE_URL_LG:"https://dicoding-restaurant-api.el.r.appspot.com/images/large/",POST_REVIEW:"https://dicoding-restaurant-api.el.r.appspot.com/review",CACHE_NAME:{prefix:"BonAppetit",suffix:"v0.3",precache:"app-shell"},DATABASE_NAME:"BonAppetit-database",DATABASE_VERSION:1,OBJECT_STORE_NAME:"restaurant"}},,function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,c,"next",e)}function c(e){r(o,a,i,s,c,"throw",e)}s(void 0)}))}}var i={init:function(e){this._id=e.id,this._content=e.content,this.createToast()},createToast:function(){var e=this;return a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.querySelector("snack-bar").innerHTML='\n      <div class="snackbar show" id="toast-'.concat(e._id,'">').concat(e._content,'\n        <button class="material-button btn-toast" aria-label="Button close Toast"><i class="fas fa-times"></i></button>\n      </div>\n    '),e.close();case 3:case"end":return t.stop()}}),t)})))()},close:function(){return a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$(".btn-toast").on("click",a(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector(".snackbar").classList.remove("show");case 1:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))()}};t.a=i},function(e,t,n){"use strict";var r=n(2);function a(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}var o={isOnline:function(){var e=this;return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==navigator.onLine){t.next=4;break}r.a.init({id:"offline",content:"No Internet Connection"}),t.next=11;break;case 4:if(!0!==navigator.onLine){t.next=8;break}r.a.init({id:"Post-Error",content:"Something wrong!"}),t.next=11;break;case 8:return r.a.init({id:"404",content:"Data Not Found"}),t.next=11,e.render404();case 11:case"end":return t.stop()}}),t)})))()},pageError:function(){var e=this;return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.render404();case 2:r.a.init({id:"page-404",content:"Page Not Found"});case 3:case"end":return t.stop()}}),t)})))()},render404:function(){return i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector("#maincontent").innerHTML='\n      <section class="content">\n        <div class="list">\n          <h2 class="errno404"><span>404</span> NOT FOUND!</h2>\n        </div>\n      </section>\n    ';case 1:case"end":return e.stop()}}),e)})))()}};t.a=o},function(e,t,n){"use strict";var r=n(23),a=n(0);function i(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}var s=a.a.DATABASE_NAME,c=a.a.DATABASE_VERSION,u=a.a.OBJECT_STORE_NAME,f=Object(r.a)(s,c,{upgrade:function(e){e.createObjectStore(u,{keyPath:"id"})}}),v={getRestaurant:function(e){return o(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f;case 2:return t.abrupt("return",t.sent.get(u,e));case 3:case"end":return t.stop()}}),t)})))()},getAllRestaurant:function(){return o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:return e.abrupt("return",e.sent.getAll(u));case 3:case"end":return e.stop()}}),e)})))()},putRestaurant:function(e){return o(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f;case 2:return t.abrupt("return",t.sent.put(u,e));case 3:case"end":return t.stop()}}),t)})))()},deleteRestaurant:function(e){return o(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f;case 2:return t.abrupt("return",t.sent.delete(u,e));case 3:case"end":return t.stop()}}),t)})))()}};t.a=v},function(e,t,n){"use strict";var r=n(7),a=n(4),i=n(8),o=n(2);function s(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,c,"next",e)}function c(e){s(i,r,a,o,c,"throw",e)}o(void 0)}))}}var u={init:function(e){var t=this;return c(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.AddToFavButton,a=e.restaurant,t._AddToFavButton=r,t._restaurant=a,n.next=5,t._changeButtonStatus();case 5:case"end":return n.stop()}}),n)})))()},_changeButtonStatus:function(){var e=this;return c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._restaurant.id,t.next=3,e._isRestaurantExist(n);case 3:if(!t.sent){t.next=7;break}e._renderLiked(),t.next=8;break;case 7:e._renderLike();case 8:case"end":return t.stop()}}),t)})))()},_isRestaurantExist:function(e){return c(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.getRestaurant(e);case 2:return n=t.sent,t.abrupt("return",!!n);case 4:case"end":return t.stop()}}),t)})))()},_renderLike:function(){var e=this,t=document.querySelector("#save-button");t.classList.remove("active"),t.addEventListener("click",c(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.putRestaurant(e._restaurant);case 2:return t.next=4,o.a.init({id:"add",content:"Added to Favorites"});case 4:e._renderLiked();case 5:case"end":return t.stop()}}),t)}))))},_renderLiked:function(){var e=this,t=document.querySelector("#save-button");t.classList.add("active"),t.addEventListener("click",c(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.deleteRestaurant(e._restaurant.id);case 2:return t.next=4,o.a.init({id:"delete",content:"Removed from Favorites"});case 4:e._renderLike();case 5:case"end":return t.stop()}}),t)}))))},_jqueryInitFavButton:function(){$("restaurant-items").on("click",".btn-fav",c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==$("#fav-"+$(this).attr("target")).hasClass("faved")){e.next=8;break}return e.next=3,a.a.deleteRestaurant($(this).attr("target"));case 3:return $("#fav-"+$(this).attr("target")).removeClass("faved"),e.next=6,o.a.init({id:$(this).attr("target"),content:$(this).attr("nama")+" dihapus dari favorites"});case 6:e.next=16;break;case 8:return e.next=10,r.a.detailRestaurant($(this).attr("target"));case 10:return t=e.sent,e.next=13,a.a.putRestaurant(t);case 13:return $("#fav-"+$(this).attr("target")).addClass("faved"),e.next=16,o.a.init({id:$(this).attr("target"),content:$(this).attr("nama")+" ditambahkan ke favorites"});case 16:case"end":return e.stop()}}),e,this)}))))},_jqueryChangeFavButton:function(e){var t=this;return c(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._isRestaurantExist(e);case 2:if(!n.sent){n.next=6;break}$("#fav-"+e).addClass("faved"),n.next=7;break;case 6:$("#fav-"+e).removeClass("faved");case 7:case"end":return n.stop()}}),n)})))()},_jqueryRemoveFavIDBButton:function(){$("restaurant-items").on("click",".btn-fav",c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.deleteRestaurant($(this).attr("target"));case 2:return $("#fav-"+$(this).attr("target")).removeClass("faved"),e.next=5,o.a.init({id:$(this).attr("target"),content:$(this).attr("nama")+" dihapus dari favorites"});case 5:return document.querySelector("restaurant-items").innerHTML="",e.next=8,i.a.afterRender();case 8:case"end":return e.stop()}}),e,this)}))))}};t.a=u},function(e,t,n){"use strict";var r={parseActiveUrlWithCombiner:function(){var e=window.location.hash.slice(1).toLowerCase(),t=this._urlSplitter(e);return this._urlCombiner(t)},parseActiveUrlWithoutCombiner:function(){var e=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(e)},_urlSplitter:function(e){var t=e.split("/");return{resource:t[1]||null,id:t[2]||null,verb:t[3]||null}},_urlCombiner:function(e){return(e.resource?"/".concat(e.resource):"/")+(e.id?"/:id":"")+(e.verb?"/".concat(e.verb):"")}};t.a=r},function(e,t,n){"use strict";var r=n(0),a={RESTAURANT_LITS:"".concat(r.a.BASE_URL,"list"),DETAIL:function(e){return"".concat(r.a.BASE_URL,"detail/").concat(e)}};function i(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,"next",e)}function c(e){i(o,r,a,s,c,"throw",e)}s(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,i,c;return t=e,n=null,r=[{key:"getListRestaurants",value:(c=o(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.RESTAURANT_LITS);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.restaurants);case 7:case"end":return e.stop()}}),e)}))),function(){return c.apply(this,arguments)})},{key:"detailRestaurant",value:(i=o(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a.DETAIL(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.restaurant);case 7:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}],n&&s(t.prototype,n),r&&s(t,r),e}();t.a=c},,,function(e,t,n){"use strict";var r=n.p+"assets/images/utils/stars.png",a={setStarsBackground:function(){for(var e=document.getElementsByClassName("post-item-stars"),t=0;t<e.length;t++)e[t].style.backgroundImage="url('".concat(r,"')")}};t.a=a},,,function(e,t,n){"use strict";t.a=n.p+"assets/images/utils/placeholder.jpg"},,,function(e,t,n){"use strict";t.a={init:function(e){var t=this,n=e.button,r=e.drawer,a=e.content;n.addEventListener("click",(function(e){t._toggleDrawer(e,r)})),a.addEventListener("click",(function(e){t._closeDrawer(e,r)}))},_toggleDrawer:function(e,t){e.stopPropagation(),t.classList.toggle("open")},_closeDrawer:function(e,t){e.stopPropagation(),t.classList.remove("open")}}},function(e,t,n){"use strict";var r=n(18),a=n(9),i=n(8),o={"/":r.a,"/detail/:id":a.a,"/favorites":i.a};t.a=o},,function(e,t,n){"use strict";t.a=n.p+"assets/images/heros/hero-image_1-small.jpg"},function(e,t,n){"use strict";t.a=n.p+"assets/images/heros/hero-image_1-large.jpg"},,function(e,t,n){"use strict";var r=n(6),a=n(0),i=n(9),o=n(3);function s(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,c,"next",e)}function c(e){s(i,r,a,o,c,"throw",e)}o(void 0)}))}}var u={sendNotification:function(e){var t=e.title,n=e.options;if(this._checkAvailability())return this._checkPermission()?void this._showNotification({title:t,options:n}):(console.log("User did not yet granted permission"),void this._requestPermission());console.log("Notification not supported in this browser")},_checkAvailability:function(){return!!("Notification"in window)},_checkPermission:function(){return"granted"===Notification.permission},_requestPermission:function(){return c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:"denied"===(t=e.sent)&&console.log("Notification Denied"),"default"===t&&console.log("Permission closed");case 5:case"end":return e.stop()}}),e)})))()},_showNotification:function(e){return c(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.title,r=e.options,t.next=3,navigator.serviceWorker.ready;case 3:t.sent.showNotification(n,r);case 5:case"end":return t.stop()}}),t)})))()}};function f(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,s,"next",e)}function s(e){f(i,r,a,o,s,"throw",e)}o(void 0)}))}}var d={_getUserReview:function(){var e=this;return v(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.a.parseActiveUrlWithoutCombiner(),a=function(t){t.preventDefault();var r=document.getElementById("name").value,a=document.getElementById("review-text").value;e._submitUserReview({id:n.id,name:r,review:a}),document.getElementById("name").value="",document.getElementById("review-text").value=""},document.getElementsByClassName("write-your-review")[0].addEventListener("submit",a);case 4:case"end":return t.stop()}}),t)})))()},_submitUserReview:function(e){return v(regeneratorRuntime.mark((function t(){var n,r,s,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,r=e.name,s=e.review,c=JSON.stringify({id:"".concat(n),name:"".concat(r),review:"".concat(s)}),f={method:"POST",headers:{"X-Auth-Token":a.a.KEY,"Content-Type":"application/json"},body:c,redirect:"follow"},t.next=5,fetch(a.a.POST_REVIEW,f).then((function(e){return e.json()})).then((function(e){var t=e.customerReviews.length-1,n=e.customerReviews[t];u.sendNotification({title:"BonAppétit - Review Published",options:{body:"Name: ".concat(n.name,"\nReview: ").concat(n.review,"\n\nPlease reload page to view your Posted Review.")}})})).catch((function(e){o.a.isOnline()}));case 5:i.a.extraRender();case 6:case"end":return t.stop()}}),t)})))()}};function l(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){l(i,r,a,o,s,"next",e)}function s(e){l(i,r,a,o,s,"throw",e)}o(void 0)}))}}var m=1,h={init:function(){var e=this,t="read",n=document.querySelector("#prev"),r=document.querySelector("#next"),a=document.querySelector("#review"),i=document.querySelector("#btn-send-review");this._writeReview(t),this._showReview(1),n.addEventListener("click",(function(){e._showReview(m+=-1),console.log("review number "+m+" loaded")})),r.addEventListener("click",(function(){e._showReview(m+=1),console.log("review number "+m+" loaded")})),a.addEventListener("click",(function(){"read"===t?(t="write",e._writeReview(t),document.querySelector("#review").classList.add("active")):"write"===t&&(t="read",e._writeReview(t),document.querySelector("#review").classList.remove("active")),console.log(t)})),i.addEventListener("click",p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d._getUserReview();case 2:t="read",document.querySelector("#review").classList.remove("active");case 4:case"end":return e.stop()}}),e)}))))},_showReview:function(e){var t,n=document.getElementsByClassName("review-container");for(e>n.length&&(m=1),e<1&&(m=n.length),t=0;t<n.length;t++)n[t].style.display="none";n[m-1].style.display="flex"},_writeReview:function(e){var t=document.querySelector("#review-list"),n=document.querySelector("#review-form");"read"===e?(t.style.display="",n.style.display="none"):"write"===e&&(t.style.display="none",n.style.display="",document.querySelector("#name").focus({preventScroll:!1}))}};t.a=h},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(24),n(25),n(12),n(27);var r=n(21);function a(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var i=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then((function(e){console.log("ServiceWorker: Install Success. Scope:",e.scope)})).catch((function(e){console.error("ServiceWorker: Install Failed. Error:",e)})):console.error("ServiceWorker: Browser is not Supported.");case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}(),o=new r.a({button:document.querySelector("#menu"),drawer:document.querySelector("#drawer"),content:document.querySelector("#maincontent")});window.addEventListener("hashchange",(function(){o.renderPage()})),window.addEventListener("load",(function(){o.renderPage(),i()}))}]]);